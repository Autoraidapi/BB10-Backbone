<html>
	<head>
		<title>RegExp</title>
	</head>
	<body>
		<script type="text/javascript">
			window.onload = function() {
				if (navigator.cascades) {
					navigator.cascades.onmessage = function(message) {
						message=JSON.parse(message);
						var pattern=message.p;
						var modifiers=message.m;
						var text=decodeURI(message.t);
						var full=message.f;
						var reg=new RegExp(pattern,modifiers);
						if (full){
							navigator.cascades.postMessage(JSON.stringify(text.match(reg)));
						}else{
							var l=text.match(reg);
							if (l){
								navigator.cascades.postMessage(l.length);
							}else{
								navigator.cascades.postMessage(0);
							}
						}
					}
				}
			}
		</script>
	</body>
</html>