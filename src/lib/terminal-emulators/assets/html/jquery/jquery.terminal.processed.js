var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e,n,t,r){n&&(t(e={a:n,d:e}),r.push.apply(r,e.e))}function n(n,t){var r,i={};!function(){for(var e=n.concat(t),o=[],a={},s=0,l=e.length;s<l;++s){var c=e[s],u=c[3];if(u)for(var f=u.length;--f>=0;)i[u.charAt(f)]=c;u=""+(c=c[1]),a.hasOwnProperty(u)||(o.push(c),a[u]=q)}o.push(/[\S\s]/),r=function(e){function n(e){var n=e.charCodeAt(0);if(92!==n)return n;var t=e.charAt(1);return(n=f[t])?n:"0"<=t&&t<="7"?parseInt(e.substring(1),8):"u"===t||"x"===t?parseInt(e.substring(2),16):e.charCodeAt(1)}function t(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),i=(e=[],[]),o="^"===r[0],a=o?1:0,s=r.length;a<s;++a){var l,c=r[a];if(/\\[bdsw]/i.test(c))e.push(c);else c=n(c),a+2<s&&"-"===r[a+1]?(l=n(r[a+2]),a+=2):l=c,i.push([c,l]),l<65||c>122||(l<65||c>90||i.push([32|Math.max(65,c),32|Math.min(l,90)]),l<97||c>122||i.push([-33&Math.max(97,c),-33&Math.min(l,122)]))}for(i.sort((function(e,n){return e[0]-n[0]||n[1]-e[1]})),r=[],c=[NaN,NaN],a=0;a<i.length;++a)(s=i[a])[0]<=c[1]+1?c[1]=Math.max(c[1],s[1]):r.push(c=s);for(i=["["],o&&i.push("^"),i.push.apply(i,e),a=0;a<r.length;++a)s=r[a],i.push(t(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&i.push("-"),i.push(t(s[1])));return i.push("]"),i.join("")}function i(e){for(var n=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),t=n.length,i=[],s=0,l=0;s<t;++s){var c=n[s];"("===c?++l:"\\"===c.charAt(0)&&(c=+c.substring(1))&&c<=l&&(i[c]=-1)}for(s=1;s<i.length;++s)-1===i[s]&&(i[s]=++o);for(l=s=0;s<t;++s)"("===(c=n[s])?void 0===i[++l]&&(n[s]="(?:"):"\\"===c.charAt(0)&&(c=+c.substring(1))&&c<=l&&(n[s]="\\"+i[l]);for(l=s=0;s<t;++s)"^"===n[s]&&"^"!==n[s+1]&&(n[s]="");if(e.ignoreCase&&a)for(s=0;s<t;++s)e=(c=n[s]).charAt(0),c.length>=2&&"["===e?n[s]=r(c):"\\"!==e&&(n[s]=c.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return n.join("")}for(var o=0,a=!1,s=!1,l=0,c=e.length;l<c;++l){var u=e[l];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,s=!1;break}}var f={b:8,t:9,n:10,v:11,f:12,r:13},p=[];for(l=0,c=e.length;l<c;++l){if((u=e[l]).global||u.multiline)throw Error(""+u);p.push("(?:"+i(u)+")")}return RegExp(p.join("|"),s?"gi":"g")}(o)}();var a=t.length;return function n(s){for(var l=s.d,c=[l,"pln"],u=0,f=s.a.match(r)||[],p={},h=0,m=f.length;h<m;++h){var g,d=f[h],v=p[d],y=void 0;if("string"==typeof v)g=!1;else{var w=i[d.charAt(0)];if(w)y=d.match(w[1]),v=w[0];else{for(g=0;g<a;++g)if(w=t[g],y=d.match(w[1])){v=w[0];break}y||(v="pln")}!(g=v.length>=5&&"lang-"===v.substring(0,5))||y&&"string"==typeof y[1]||(g=!1,v="src"),g||(p[d]=v)}if(w=u,u+=d.length,g){g=y[1];var _=d.indexOf(g),b=_+g.length;y[2]&&(_=(b=d.length-y[2].length)-g.length),v=v.substring(5),e(l+w,d.substring(0,_),n,c),e(l+w+_,g,o(v,g),c),e(l+w+b,d.substring(b),n,c)}else c.push(l+w,v)}s.e=c}}function t(e){var t=[],r=[];e.tripleQuotedStrings?t.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):e.multiLineStrings?t.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):t.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),e.verbatimStrings&&r.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var i=e.hashComments;return i&&(e.cStyleComments?(i>1?t.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):t.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),r.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):t.push(["com",/^#[^\n\r]*/,q,"#"])),e.cStyleComments&&(r.push(["com",/^\/\/[^\n\r]*/,q]),r.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),e.regexLiterals&&r.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(i=e.types)&&r.push(["typ",i]),(e=(""+e.keywords).replace(/^ | $/g,"")).length&&r.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),q]),t.push(["pln",/^\s+/,q," \r\n\t "]),r.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]),n(t,r)}function r(e,n){function t(e){switch(e.nodeType){case 1:if(o.test(e.className))break;if("BR"===e.nodeName)r(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)t(e);break;case 3:case 4:if(l){var n=e.nodeValue,i=n.match(a);if(i){var c=n.substring(0,i.index);e.nodeValue=c,(n=n.substring(i.index+i[0].length))&&e.parentNode.insertBefore(s.createTextNode(n),e.nextSibling),r(e),c||e.parentNode.removeChild(e)}}}}function r(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var n;for(e=function e(n,t){var r=t?n.cloneNode(!1):n;if(i=n.parentNode){var i=e(i,1),o=n.nextSibling;i.appendChild(r);for(var a=o;a;a=o)o=a.nextSibling,i.appendChild(a)}return r}(e.nextSibling,0);(n=e.parentNode)&&1===n.nodeType;)e=n;c.push(e)}var i,o=/(?:^|\s)nocode(?:\s|$)/,a=/\r\n?|\n/,s=e.ownerDocument;e.currentStyle?i=e.currentStyle.whiteSpace:window.getComputedStyle&&(i=s.defaultView.getComputedStyle(e,q).getPropertyValue("white-space"));var l=i&&"pre"===i.substring(0,3);for(i=s.createElement("LI");e.firstChild;)i.appendChild(e.firstChild);for(var c=[i],u=0;u<c.length;++u)t(c[u]);n===(0|n)&&c[0].setAttribute("value",n);var f=s.createElement("OL");f.className="linenums";for(var p=Math.max(0,n-1|0)||0,h=(u=0,c.length);u<h;++u)(i=c[u]).className="L"+(u+p)%10,i.firstChild||i.appendChild(s.createTextNode(" ")),f.appendChild(i);e.appendChild(f)}function i(e,n){for(var t=n.length;--t>=0;){var r=n[t];v.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):v[r]=e}}function o(e,n){return e&&v.hasOwnProperty(e)||(e=/^\s*</.test(n)?"default-markup":"default-code"),v[e]}function a(e){var n=e.g;try{var t=(c=function(e){var n,t=/(?:^|\s)nocode(?:\s|$)/,r=[],i=0,o=[],a=0;e.currentStyle?n=e.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,q).getPropertyValue("white-space"));var s=n&&"pre"===n.substring(0,3);return function e(n){switch(n.nodeType){case 1:if(t.test(n.className))break;for(var l=n.firstChild;l;l=l.nextSibling)e(l);"BR"!==(l=n.nodeName)&&"LI"!==l||(r[a]="\n",o[a<<1]=i++,o[a++<<1|1]=n);break;case 3:case 4:(l=n.nodeValue).length&&(l=s?l.replace(/\r\n?/g,"\n"):l.replace(/[\t\n\r ]+/g," "),r[a]=l,o[a<<1]=i,i+=l.length,o[a++<<1|1]=n)}}(e),{a:r.join("").replace(/\n$/,""),c:o}}(e.h)).a;e.a=t,e.c=c.c,e.d=0,o(n,t)(e);var r,i,a=/\bMSIE\b/.test(navigator.userAgent),s=(n=/\n/g,e.a),l=s.length,c=0,u=e.c,f=u.length,p=(t=0,e.e),h=p.length;e=0;for(p[h]=l,i=r=0;i<h;)p[i]!==p[i+2]?(p[r++]=p[i++],p[r++]=p[i++]):i+=2;for(h=r,i=r=0;i<h;){for(var m=p[i],g=p[i+1],d=i+2;d+2<=h&&p[d+1]===g;)d+=2;p[r++]=m,p[r++]=g,i=d}for(p.length=r;t<f;){var v,y=u[t+2]||l,w=p[e+2]||l,_=(d=Math.min(y,w),u[t+1]);if(1!==_.nodeType&&(v=s.substring(c,d))){a&&(v=v.replace(n,"\r")),_.nodeValue=v;var b=_.ownerDocument,x=b.createElement("SPAN");x.className=p[e+1];var k=_.parentNode;k.replaceChild(x,_),x.appendChild(_),c<y&&(u[t+1]=_=b.createTextNode(s.substring(d,y)),k.insertBefore(_,x.nextSibling))}(c=d)>=y&&(t+=2),c>=w&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var s,l,c=[s=[[l=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],u=[s,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[u,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],p=[l,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],h=[l,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],m=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,g=/\S/,d=t({keywords:[c,f,s=[s,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+p,h,l=[l,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),v={};i(d,["default-code"]),i(n([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),i(n([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),i(n([],[["atv",/^[\S\s]+/]]),["uq.val"]),i(t({keywords:c,hashComments:!0,cStyleComments:!0,types:m}),["c","cc","cpp","cxx","cyc","m"]),i(t({keywords:"null,true,false"}),["json"]),i(t({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:m}),["cs"]),i(t({keywords:u,cStyleComments:!0}),["java"]),i(t({keywords:l,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),i(t({keywords:p,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),i(t({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),i(t({keywords:h,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),i(t({keywords:s,cStyleComments:!0,regexLiterals:!0}),["js"]),i(t({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),i(n([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,n,t){var i=document.createElement("PRE");return i.innerHTML=e,t&&r(i,t),a({g:n,i:t,h:i}),i.innerHTML},window.prettyPrint=function(e){for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],t=[],i=0;i<n.length;++i)for(var o=0,s=n[i].length;o<s;++o)t.push(n[i][o]);n=q;var l=Date;l.now||(l={now:function(){return+new Date}});var c=0,u=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function n(){for(var i=window.PR_SHOULD_USE_CONTINUATION?l.now()+250:1/0;c<t.length&&l.now()<i;c++){var o=t[c];if((s=o.className).indexOf("prettyprint")>=0){var s,f,p;if(p=!(s=s.match(u))){for(var h=void 0,m=(p=o).firstChild;m;m=m.nextSibling){var d=m.nodeType;h=1===d?h?p:m:3===d&&g.test(m.nodeValue)?p:h}p=(f=h===p?void 0:h)&&"CODE"===f.tagName}for(p&&(s=f.className.match(u)),s&&(s=s[1]),p=!1,h=o.parentNode;h;h=h.parentNode)if(("pre"===h.tagName||"code"===h.tagName||"xmp"===h.tagName)&&h.className&&h.className.indexOf("prettyprint")>=0){p=!0;break}p||((p=!!(p=o.className.match(/\blinenums\b(?::(\d+))?/))&&(!p[1]||!p[1].length||+p[1]))&&r(o,p),a({g:s,h:o,i:p}))}}c<t.length?setTimeout(n,250):e&&e()}()},window.PR={createSimpleLexer:n,registerLangHandler:i,sourceDecorator:t,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}(),document.worker=new Worker(URL.createObjectURL(new Blob([document.getElementById("worker").textContent],{type:"text/javascript"}))),document.worker.addEventListener("message",(function(e){console.log(e.data)})),document.worker.close=function(){},document.worker.post=function(){},
/**@license
 *       __ _____                     ________                              __
 *      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /
 *  __ / // // // // // _  // _// // / / // _  // _//     // //  \/ // _ \/ /
 * /  / // // // // // ___// / / // / / // ___// / / / / // // /\  // // / /__
 * \___//____ \\___//____//_/ _\_  / /_//____//_/ /_/ /_//_//_/ /_/ \__\_\___/
 *           \/              /____/                              version 0.10.11
 *
 * This file is part of jQuery Terminal. http://terminal.jcubic.pl
 *
 * Copyright (c) 2010-2016 Jakub Jankiewicz <http://jcubic.pl>
 * Released under the MIT license
 *
 * Contains:
 *
 * Storage plugin Distributed under the MIT License
 * Copyright (c) 2010 Dave Schindler
 *
 * jQuery Timers licenced with the WTFPL
 * <http://jquery.offput.ca/timers/>
 *
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 *
 * jQuery Caret
 * Copyright (c) 2009, Gideon Sireling
 * 3 clause BSD License
 *
 * sprintf.js
 * Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro>
 * licensed under 3 clause BSD license
 *
 * Date: Sun, 05 Jun 2016 20:11:00 +0000
 */
function(e){var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};n.format=function(e,i){var o,a,s,l,c,u,f,p=1,h=e.length,m="",g=[];for(a=0;a<h;a++)if("string"===(m=t(e[a])))g.push(e[a]);else if("array"===m){if((l=e[a])[2])for(o=i[p],s=0;s<l[2].length;s++){if(!o.hasOwnProperty(l[2][s]))throw n('[sprintf] property "%s" does not exist',l[2][s]);o=o[l[2][s]]}else o=l[1]?i[l[1]]:i[p++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw n("[sprintf] expecting number but found %s",t(o));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",f=l[6]-String(o).length,c=l[6]?r(u,f):"",g.push(l[5]?o+c:c+o)}return g.join("")},n.cache={},n.parse=function(e){for(var n=e,t=[],r=[],i=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";if(t[2]){i|=1;var o=[],a=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(t)}n=n.substring(t[0].length)}return r};function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,n){for(var t=[];n>0;t[--n]=e);return t.join("")}e.sprintf=n,e.vsprintf=function(e,t,r){return(r=t.slice(0)).splice(0,0,e),n.apply(null,r)}}("undefined"!=typeof global?global:window),function(e,n){"use strict";e.omap=function(n,t){var r={};return e.each(n,(function(e,i){r[e]=t.call(n,e,i)})),r};var t={clone_object:function(n){var t={};if("object"==typeof n){if(e.isArray(n))return this.clone_array(n);if(null===n)return n;for(var r in n)e.isArray(n[r])?t[r]=this.clone_array(n[r]):"object"==typeof n[r]?t[r]=this.clone_object(n[r]):t[r]=n[r]}return t},clone_array:function(n){if(!e.isFunction(Array.prototype.map))throw new Error("You'r browser don't support ES5 array map use es5-shim");return n.slice(0).map(function(e){return"object"==typeof e?this.clone_object(e):e}.bind(this))}},r=function(e){return t.clone_object(e)},i=function(){var e="test",n=window.localStorage;try{return n.setItem(e,"1"),n.removeItem(e),!0}catch(e){return!1}}();function o(e,n){var t,r,i;if((t=new Date).setTime(t.getTime()+31536e6),r="; expires="+t.toGMTString(),"string"==typeof e&&"string"==typeof n)return document.cookie=e+"="+n+r+"; path=/",!0;if("object"==typeof e&&void 0===n){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}e.extend({Storage:{set:i?function(e,n){var t;if("string"==typeof e&&"string"==typeof n)return localStorage[e]=n,!0;if("object"==typeof e&&void 0===n){for(t in e)e.hasOwnProperty(t)&&(localStorage[t]=e[t]);return!0}return!1}:o,get:i?function(e){return localStorage[e]}:function(e){var n,t,r,i;for(n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(i=t[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null},remove:i?function(e){return delete localStorage[e]}:function(e){return o(e,"")}}});var a=e;function s(e,n){var t=[],r=e.length;if(r<n)return[e];if(n<0)throw new Error("str_parts: length can't be negative");for(var i=0;i<r;i+=n)t.push(e.substring(i,i+n));return t}function l(n){var t=n instanceof Array?n:n?[n]:[];e.extend(this,{map:function(n){return e.map(t,n)},size:function(){return t.length},pop:function(){if(0===t.length)return null;var e=t[t.length-1];return t=t.slice(0,t.length-1),e},push:function(e){return t=t.concat([e]),e},top:function(){return t.length>0?t[t.length-1]:null},clone:function(){return new l(t.slice(0))}})}function c(n,t){var r=!0,i="";"string"==typeof n&&""!==n&&(i=n+"_"),i+="commands";var o=e.Storage.get(i),a=(o=o?e.parseJSON(o):[]).length-1;e.extend(this,{append:function(n){r&&o[o.length-1]!==n&&(o.push(n),t&&o.length>t&&(o=o.slice(-t)),a=o.length-1,e.Storage.set(i,e.json_stringify(o)))},data:function(){return o},reset:function(){a=o.length-1},last:function(){return o[length-1]},end:function(){return a===o.length-1},position:function(){return a},current:function(){return o[a]},next:function(){if(a<o.length-1&&++a,-1!==a)return o[a]},previous:function(){var e=a;if(a>0&&--a,-1!==e)return o[a]},clear:function(){o=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(i)},disable:function(){r=!1}})}a.fn.extend({everyTime:function(e,n,t,r,i){return this.each((function(){a.timer.add(this,e,n,t,r,i)}))},oneTime:function(e,n,t){return this.each((function(){a.timer.add(this,e,n,t,1)}))},stopTime:function(e,n){return this.each((function(){a.timer.remove(this,e,n)}))}}),a.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===n||null===e)return null;var t=this.regex.exec(a.trim(e.toString()));return t[2]?parseInt(t[1],10)*(this.powers[t[2]]||1):e},add:function(e,n,t,r,i,o){var s=0;if(a.isFunction(t)&&(i||(i=r),r=t,t=n),!("number"!=typeof(n=a.timer.timeParse(n))||isNaN(n)||n<=0)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[t]||(e.$timers[t]={}),r.$timerID=r.$timerID||this.guid++;var l=function(){o&&l.inProgress||(l.inProgress=!0,(++s>i&&0!==i||!1===r.call(e,s))&&a.timer.remove(e,t,r),l.inProgress=!1)};l.$timerID=r.$timerID,e.$timers[t][r.$timerID]||(e.$timers[t][r.$timerID]=window.setInterval(l,n)),this.global[t]||(this.global[t]=[]),this.global[t].push(e)}},remove:function(e,n,t){var r,i=e.$timers;if(i){if(n){if(i[n]){if(t)t.$timerID&&(window.clearInterval(i[n][t.$timerID]),delete i[n][t.$timerID]);else for(var o in i[n])i[n].hasOwnProperty(o)&&(window.clearInterval(i[n][o]),delete i[n][o]);for(r in i[n])if(i[n].hasOwnProperty(r))break;r||(r=null,delete i[n])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,t);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&a(window).one("unload",(function(){var e=a.timer.global;for(var n in e)if(e.hasOwnProperty(n))for(var t=e[n],r=t.length;--r;)a.timer.remove(t[r],n)})),function(e){if(String.prototype.split.toString().match(/\[native/)){var n,t=String.prototype.split,r=/()??/.exec("")[1]===e;n=function(n,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return t.call(n,i,o);var a,s,l,c,u=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),p=0;for(i=new RegExp(i.source,f+"g"),n+="",r||(a=new RegExp("^"+i.source+"$(?!\\s)",f)),o=o===e?-1>>>0:o>>>0;(s=i.exec(n))&&!((l=s.index+s[0].length)>p&&(u.push(n.slice(p,s.index)),!r&&s.length>1&&s[0].replace(a,(function(){for(var n=1;n<arguments.length-2;n++)arguments[n]===e&&(s[n]=e)})),s.length>1&&s.index<n.length&&Array.prototype.push.apply(u,s.slice(1)),c=s[0].length,p=l,u.length>=o));)i.lastIndex===s.index&&i.lastIndex++;return p===n.length?!c&&i.test("")||u.push(""):u.push(n.slice(p)),u.length>o?u.slice(0,o):u},String.prototype.split=function(e,t){return n(this,e,t)}}}(),e.fn.caret=function(e){var n=this[0],t="true"===n.contentEditable;if(0==arguments.length){if(window.getSelection)return t?(n.focus(),(i=(r=window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(n),i.setEnd(r.endContainer,r.endOffset),i.toString().length):n.selectionStart;if(document.selection){if(n.focus(),t){var r=document.selection.createRange();return(i=document.body.createTextRange()).moveToElementText(n),i.setEndPoint("EndToEnd",r),i.text.length}e=0;var i,o=n.createTextRange(),a=(i=document.selection.createRange().duplicate()).getBookmark();for(o.moveToBookmark(a);0!==o.moveStart("character",-1);)e++;return e}return 0}if(-1==e&&(e=this[t?"text":"val"]().length),window.getSelection)t?(n.focus(),window.getSelection().collapse(n.firstChild,e)):n.setSelectionRange(e,e);else if(document.body.createTextRange){(o=document.body.createTextRange()).moveToElementText(n),o.moveStart("character",e),o.collapse(!0),o.select()}return t||n.focus(),e},e.json_stringify=function(t,r){var i,o="";switch(r=r===n?1:r,typeof t){case"function":o+=t;break;case"boolean":o+=t?"true":"false";break;case"object":if(null===t)o+="null";else if(t instanceof Array){o+="[";var a=t.length;for(i=0;i<a-1;++i)o+=e.json_stringify(t[i],r+1);o+=e.json_stringify(t[a-1],r+1)+"]"}else{for(var s in o+="{",t)t.hasOwnProperty(s)&&(o+='"'+s+'":'+e.json_stringify(t[s],r+1));o+="}"}break;case"string":var l=t,c={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(i in c)c.hasOwnProperty(i)&&(l=l.replace(new RegExp(i,"g"),c[i]));o+='"'+l+'"';break;case"number":o+=String(t)}return o+=r>1?",":"",1===r&&(o=o.replace(/,([\]}])/g,"$1")),o.replace(/([\[{]),/g,"$1")};var u,f=((u=document.createElement("div")).setAttribute("onpaste","return;"),"function"==typeof u.onpaste);e.fn.cmd=function(t){var r=this,i=r.data("cmd");if(i)return i;r.addClass("cmd"),r.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var o,a,l=e("<textarea />").addClass("clipboard").appendTo(r);t.width&&r.width(t.width);var u,g,d,v,y,w,_,b=r.find(".prompt"),x=!1,k="",S=null,C=t.mask||!1,T="",E="",A="",N=0,R=t.historySize||60,F=r.find(".cursor");function j(){if(m){var e=l.is(":focus");v?e||(l.focus(),r.oneTime(10,(function(){l.focus()}))):e&&l.blur()}}function I(){m&&r.oneTime(10,(function(){l.val(T),r.oneTime(10,(function(){l.caret(N)}))}))}if(p&&!h)_=function(e){e?F.addClass("blink"):F.removeClass("blink")};else{var O=!1;_=function(e){e&&!O?(O=!0,F.addClass("inverted"),r.everyTime(500,"blink",P)):O&&!e&&(O=!1,r.stopTime("blink",P),F.removeClass("inverted"))}}function P(e){F.toggleClass("inverted")}function L(){d="(reverse-i-search)`"+k+"': ",q()}function z(n){var t,i,o=w.data(),a=o.length;if(n&&S>0&&(a-=S),k.length>0)for(var s=k.length;s>0;s--){i=e.terminal.escape_regex(k.substring(0,s)),t=new RegExp(i);for(var l=a;l--;)if(t.test(o[l]))return S=o.length-l,r.position(o[l].indexOf(i)),r.set(o[l],!0),D(),void(k.length!==s&&(k=k.substring(0,s),L()))}k=""}var D=function(n){var t=F.prev(),r=F.next();function i(n,i){if(i===n.length)t.html(e.terminal.encode(n)),F.html("&nbsp;"),r.html("");else if(0===i)t.html(""),F.html(e.terminal.encode(n.slice(0,1))),r.html(e.terminal.encode(n.slice(1)));else{var o=n.slice(0,i);t.html(e.terminal.encode(o));var a=n.slice(i,i+1);F.html(e.terminal.encode(a)),i===n.length-1?r.html(""):r.html(e.terminal.encode(n.slice(i+1)))}}function l(n){return"<div>"+e.terminal.encode(n)+"</div>"}function c(n){var t=r;e.each(n,(function(n,r){t=e(l(r)).insertAfter(t).addClass("clear")}))}function u(n){e.each(n,(function(e,n){t.before(l(n))}))}return function(){var f,p,h,m;switch(typeof C){case"boolean":f=C?T.replace(/./g,"*"):T;break;case"string":f=T.replace(/./g,C)}if(n.find("div").remove(),t.html(""),f.length>o-a-1||f.match(/\n/)){var g,d=f.match(/\t/g),v=d?3*d.length:0;if(d&&(f=f.replace(/\t/g,"\0\0\0\0")),f.match(/\n/)){var y=f.split("\n");for(m=o-a-1,h=0;h<y.length-1;++h)y[h]+=" ";for(y[0].length>m?(g=[y[0].substring(0,m)],p=y[0].substring(m),g=g.concat(s(p,o))):g=[y[0]],h=1;h<y.length;++h)y[h].length>o?g=g.concat(s(y[h],o)):g.push(y[h])}else g=function(e){var n=e.substring(0,o-a),t=e.substring(o-a);return[n].concat(s(t,o))}(f);if(d&&(g=e.map(g,(function(e){return e.replace(/\x00\x00\x00\x00/g,"\t")}))),0===(m=g[0].length)&&1===g.length);else if(N<m)i(g[0],N),c(g.slice(1));else if(N===m)t.before(l(g[0])),i(g[1],0),c(g.slice(2));else{var w=g.length;if(N<m)i(g[0],N),c(g.slice(1));else if(N===m)t.before(l(g[0])),i(g[1],0),c(g.slice(2));else{var _=g.slice(-1)[0],b=f.length-N-v,x=_.length,k=0;if(b<=x)u(g.slice(0,-1)),i(_,k=x===b?0:x-b);else if(3===w)p=e.terminal.encode(g[0]),t.before("<div>"+p+"</div>"),i(g[1],N-m-1),p=e.terminal.encode(g[2]),r.after('<div class="clear">'+p+"</div>");else{var S,E;for(k=N,h=0;h<g.length;++h){var A=g[h].length;if(!(k>A))break;k-=A}S=h,k===(E=g[h]).length&&(k=0,E=g[++S]),i(E,k),u(g.slice(0,S)),c(g.slice(S+1))}}}}else""===f?(t.html(""),F.html("&nbsp;"),r.html("")):i(f,N)}}(r),q=function(){function n(n){b.html(e.terminal.format(e.terminal.encode(n))),a=b.text().length}return function(){switch(typeof d){case"string":n(d);break;case"function":d(n)}}}();function K(e){if(e=e.originalEvent,r.isenabled()){var n,t=r.find("textarea");t.is(":focus")||t.focus(),window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):cmd.oneTime(100,(function(){r.insert(t.val()),t.val(""),I()})),n&&(r.insert(n),t.val(""),I())}}var B,M,U,H=!0,W=!1;function J(i){var o,a,s;if(v){if(e.isFunction(t.keydown)&&(o=t.keydown(i))!==n)return o;if(38===i.which||80===i.which&&i.ctrlKey||(H=!0),!x||35!==i.which&&36!==i.which&&37!==i.which&&38!==i.which&&39!==i.which&&40!==i.which&&13!==i.which&&27!==i.which){if(i.altKey)return 68!==i.which||(r.set(T.slice(0,N)+T.slice(N).replace(/ *[^ ]+ *(?= )|[^ ]+$/,""),!0),!1);if(13===i.keyCode)if(i.shiftKey)r.insert("\n");else{(w&&T&&!C&&e.isFunction(t.historyFilter)&&t.historyFilter(T)||t.historyFilter instanceof RegExp&&T.match(t.historyFilter)||!t.historyFilter)&&w.append(T);var c=T;w.reset(),r.set(""),t.commands&&t.commands(c),e.isFunction(d)&&q()}else if(8===i.which){if(x?(k=k.slice(0,-1),L()):""!==T&&N>0&&r.delete(-1),m)return!0}else if(67===i.which&&i.ctrlKey&&i.shiftKey)E=$();else if(86===i.which&&i.ctrlKey&&i.shiftKey)""!==E&&r.insert(E);else if(9!==i.which||i.ctrlKey||i.altKey){if(46===i.which)return void r.delete(1);if(w&&38===i.which&&!i.ctrlKey||80===i.which&&i.ctrlKey)H?(g=T,r.set(w.current())):r.set(w.previous()),H=!1;else if(w&&40===i.which&&!i.ctrlKey||78===i.which&&i.ctrlKey)r.set(w.end()?g:w.next());else if(37===i.which||66===i.which&&i.ctrlKey)if(i.ctrlKey&&66!==i.which){a=0," "===T[s=N-1]&&--s;for(var p=s;p>0;--p){if(" "===T[p]&&" "!==T[p+1]){a=p+1;break}if("\n"===T[p]&&"\n"!==T[p+1]){a=p;break}}r.position(a)}else N>0&&(r.position(-1,!0),D());else if(82===i.which&&i.ctrlKey)x?z(!0):(u=d,L(),g=T,r.set(""),D(),x=!0);else if(71==i.which&&i.ctrlKey)x&&(d=u,q(),r.set(g),D(),x=!1,k="");else if(39===i.which||70===i.which&&i.ctrlKey)if(i.ctrlKey&&70!==i.which){" "===T[N]&&++N;var h=T.slice(N).match(/\S[\n\s]{2,}|[\n\s]+\S?/);!h||h[0].match(/^\s+$/)?r.position(T.length):" "!==h[0][0]?N+=h.index+1:(N+=h.index+h[0].length-1," "!==h[0][h[0].length-1]&&--N),D()}else N<T.length&&r.position(1,!0);else{if(123===i.which)return;if(36===i.which)r.position(0);else if(35===i.which)r.position(T.length);else{if(i.shiftKey&&45==i.which)return l.val(""),void(f?l.focus():K());if(!i.ctrlKey&&!i.metaKey)return W=!1,void(B=!0);if(192===i.which)return;if(i.metaKey){if(82===i.which)return;if(76===i.which)return}if(i.shiftKey){if(84===i.which)return}else{if(81===i.which){if(""!==T&&0!==N){var y=T.slice(0,N).match(/([^ ]+ *$)/);A=r.delete(-y[0].length)}return!1}if(72===i.which)return""!==T&&N>0&&r.delete(-1),!1;if(65===i.which)r.position(0);else if(69===i.which)r.position(T.length);else{if(88===i.which||67===i.which||84===i.which)return;if(89===i.which)""!==A&&r.insert(A);else{if(86===i.which)return l.val(""),void(f?l.focus():K());if(75===i.which)A=r.delete(T.length-N);else if(85===i.which)""!==T&&0!==N&&(A=r.delete(-N));else if(17===i.which)return!1}}}}}}else r.insert("\t")}else d=u,x=!1,S=null,k="",q(),27===i.which&&r.set(""),D(),J.call(this,i);i.preventDefault()}}function V(){e.isFunction(t.onCommandChange)&&t.onCommandChange(T)}e.extend(r,{name:function(e){if(e!==n){y=e;var t=w&&w.enabled()||!w;return w=new c(e,R),t||w.disable(),r}return y},purge:function(){return w.clear(),r},history:function(){return w},delete:function(e,n){var t;return 0===e?r:(e<0?N>0&&(t=T.slice(0,N).slice(e),T=T.slice(0,N+e)+T.slice(N,T.length),n?V():r.position(N+e)):""!==T&&N<T.length&&(t=T.slice(N).slice(0,e),T=T.slice(0,N)+T.slice(N+e,T.length),V()),D(),I(),t)},set:function(e,t){return e!==n&&(T=e,t||r.position(T.length),D(),I(),V()),r},insert:function(e,n){return N===T.length?T+=e:T=0===N?e+T:T.slice(0,N)+e+T.slice(N),n?I():r.position(e.length,!0),D(),V(),r},get:function(){return T},commands:function(e){return e?(t.commands=e,r):e},destroy:function(){return G.unbind("keypress.cmd",Y),G.unbind("keydown.cmd",J),G.unbind("paste.cmd",K),G.unbind("input.cmd",Q),r.stopTime("blink",P),r.find(".cursor").next().remove().end().prev().remove().end().remove(),r.find(".prompt, .clipboard").remove(),r.removeClass("cmd").removeData("cmd"),r},prompt:function(e){if(e===n)return d;if("string"!=typeof e&&"function"!=typeof e)throw new Error("prompt must be a function or string");return d=e,q(),D(),r},kill_text:function(){return A},position:function(n,i){return"number"==typeof n?(i?N+=n:N=n<0?0:n>T.length?T.length:n,e.isFunction(t.onPositionChange)&&t.onPositionChange(N),D(),I(),r):N},visible:(U=r.visible,function(){U.apply(r,[]),D(),q()}),show:(M=r.show,function(){M.apply(r,[]),D(),q()}),resize:function(e){var n,t;return e?o=e:(n=r.width(),t=F.width(),o=Math.floor(n/t)),D(),r},enable:function(){return v=!0,r.addClass("enabled"),_(!0),j(),r},isenabled:function(){return v},disable:function(){return v=!1,r.removeClass("enabled"),_(!1),j(),r},mask:function(e){return void 0===e?C:(C=e,D(),r)}}),r.name(t.name||t.prompt||""),d="string"==typeof t.prompt?t.prompt:"> ",q(),t.enabled!==n&&!0!==t.enabled||r.enable();var G=e(document.documentElement||window);function Y(i){var o;if(B=!1,!(i.ctrlKey&&99===i.which||W)){if(!x&&e.isFunction(t.keypress)&&(o=t.keypress(i)),o!==n&&!o)return o;if(v){if(e.inArray(i.which,[38,13,0,8])>-1&&(38!==i.which||!i.shiftKey)){if(123==i.keyCode)return;return!1}if(!i.ctrlKey&&(!i.altKey||100!==i.which)||i.altKey)return x?(k+=String.fromCharCode(i.which),z(),L()):r.insert(String.fromCharCode(i.which)),!1}}}function Q(e){if(B){var n=l.val();(n||8==e.which)&&r.set(n)}}return G.bind("keypress.cmd",Y).bind("keydown.cmd",J).bind("input.cmd",Q),f&&G.bind("paste.cmd",K),r.data("cmd",r),r};var p=function(){var e=!1,t="Webkit Moz O ms Khtml".split(" "),r="",i=document.createElement("div");if(i.style.animationName&&(e=!0),!1===e)for(var o=0;o<t.length;o++){var a=t[o]+"AnimationName";if(i.style[a]!==n){(r=t[o])+"Animation","-"+r.toLowerCase()+"-",e=!0;break}}return e}(),h=-1!=navigator.userAgent.toLowerCase().indexOf("android"),m="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;function g(n,t){var r=t(n);if(r.length){var i=r.shift(),o=new RegExp("^"+e.terminal.escape_regex(i)),a=n.replace(o,"").trim();return{command:n,name:i,args:r,rest:a}}return{command:n,name:"",args:[],rest:""}}var d=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/i,v=/\[\[([!gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,y=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,w=/\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]/gi,_=/^\[\[([!gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]$/gi,b=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,x=/(\bhttps?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\]\[)])+\b)/gi,k=/\b(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\][)])+)\b(?![^[\]]*])/gi,S=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,C=/('[^']*'|"(\\"|[^"])*"|(?:\/(\\\/|[^\/])+\/[gimy]*)(?=:? |$)|(\\ |[^ ])+|[\w-]+)/gi,T=/(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,E=/^(\[\[[!gbiuso]*;[^;]*;[^\]]*\])/i,A=/\[\[[!gbiuso]*;[^;]*;[^\]]*\]?$/i,N=/(\[\[(?:[^\]]|\\\])*\]\])/;e.terminal={version:"0.10.11",color_names:["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valid_color:function(n){return!!n.match(b)||-1!==e.inArray(n.toLowerCase(),e.terminal.color_names)},escape_regex:function(e){if("string"==typeof e){return e.replace(/([-\\\^$\[\]()+{}?*.|])/g,"\\$1")}},have_formatting:function(e){return"string"==typeof e&&!!e.match(w)},is_formatting:function(e){return"string"==typeof e&&!!e.match(_)},format_split:function(e){return e.split(d)},split_equal:function(n,t,r){var i=!1,o=!1,a="",s=[],l=n.replace(y,(function(e,n,t){var r=n.match(/;/g).length;return r>=4?e:"[["+n+(r=2==r?";;":3==r?";":"")+t.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ")+"]"+t+"]"})).split(/\n/g);for(var c=0,u=l.length;c<u;++c)if(""!==l[c])for(var f=l[c],p=0,h=0,m=-1,g=0,d=f.length;g<d;++g){if(f.substring(g).match(E))i=!0,o=!1;else if(i&&"]"===f[g])o?(i=!1,o=!1):o=!0;else if(i&&o||!i){if("&"===f[g]){var v=f.substring(g).match(/^(&[^;]+;)/);if(!v)throw new Error("Unclosed html entity in line "+(c+1)+" at char "+(g+1));(g+=v[1].length-2)===d-1&&s.push(w+v[1]);continue}"]"===f[g]&&"\\"===f[g-1]?--h:++h}if("&nbsp;"!=f.substring(g-6,g)&&" "!=f.substring(g-1,g)||!(i&&o||!i||"["===f[g]&&"["===f[g+1])||(m=g),(h===t||g===d-1)&&(i&&o||!i)){var w,_=e.terminal.strip(f.substring(m)),b=(_=e("<span>"+_+"</span>").text()).length,x=!!(_=_.substring(0,g+t+1)).match(/\s/)||g+t+1>b;r&&-1!=m&&g!==d-1&&x?(w=f.substring(p,m),g=m-1):w=f.substring(p,g+1),r&&(w=w.replace(/(&nbsp;|\s)+$/g,"")),m=-1,p=g+1,h=0,a&&(w=a+w).match("]")&&(a="");var k=w.match(y);if(k){var S=k[k.length-1];if("]"!==S[S.length-1])a=S.match(T)[1],w+="]";else if(w.match(A)){w.length;w=w.replace(A,""),a=S.match(T)[1]}}s.push(w)}}else s.push("");return s},encode:function(e){return(e=e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;)/g,"&amp;")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},escape_formatting:function(n){return e.terminal.escape_brackets(e.terminal.encode(n))},format:function(n,t){var r=e.extend({},{linksNoReferrer:!1},t||{});if("string"==typeof n){var i=e.terminal.format_split(n);return(n=e.map(i,(function(n){return""===n?n:e.terminal.is_formatting(n)?n.replace(v,(function(n,t,i,o,a,s,l){if(""===l)return"";l=l.replace(/\\]/g,"]");var c="";-1!==t.indexOf("b")&&(c+="font-weight:bold;");var u,f,p=[];return-1!==t.indexOf("u")&&p.push("underline"),-1!==t.indexOf("s")&&p.push("line-through"),-1!==t.indexOf("o")&&p.push("overline"),p.length&&(c+="text-decoration:"+p.join(" ")+";"),-1!==t.indexOf("i")&&(c+="font-style:italic;"),e.terminal.valid_color(i)&&(c+="color:"+i+";",-1!==t.indexOf("g")&&(c+="text-shadow:0 0 5px "+i+";")),e.terminal.valid_color(o)&&(c+="background-color:"+o),u=""===s?l:s.replace(/&#93;/g,"]"),-1!==t.indexOf("!")?u.match(S)?f='<a href="mailto:'+u+'" ':(f='<a target="_blank" href="'+u+'" ',r.linksNoReferrer&&(f+='rel="noreferrer" ')):f="<span ",""!==c&&(f+='style="'+c+'"'),""!==a&&(f+=' class="'+a+'"'),-1!==t.indexOf("!")?f+=">"+l+"</a>":f+=' data-text="'+u.replace('"',"&quote;")+'">'+l+"</span>",f})):"<span>"+n.replace(/\\\]/g,"]")+"</span>"})).join("")).replace(/<span><br\s*\/?><\/span>/gi,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(v,"$6")},active:function(){return B.front()},parseArguments:function(n){return e.terminal.parse_arguments(n)},splitArguments:function(n){return e.terminal.split_arguments(n)},parseCommand:function(n){return e.terminal.parse_command(n)},splitCommand:function(n){return e.terminal.split_command(n)},parse_arguments:function(n){var t=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;return e.map(n.match(C)||[],(function(e){if("'"===e[0]&&"'"===e[e.length-1])return e.replace(/^'|'$/g,"");if('"'===e[0]&&'"'===e[e.length-1])return(e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1")).replace(/\\\\|\\t|\\n/g,(function(e){return"t"===e[1]?"\t":"n"===e[1]?"\n":"\\"})).replace(/\\x([0-9a-f]+)/gi,(function(e,n){return String.fromCharCode(parseInt(n,16))})).replace(/\\0([0-7]+)/g,(function(e,n){return String.fromCharCode(parseInt(n,8))}));if(e.match(/^\/(\\\/|[^\/])+\/[gimy]*$/)){var n=e.match(/^\/([^\/]+)\/([^\/]*)$/);return new RegExp(n[1],n[2])}return e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(t)?parseFloat(e):e.replace(/\\ /g," ")}))},split_arguments:function(n){return e.map(n.match(C)||[],(function(e){return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.replace(/\\ /g," ")}))},parse_command:function(n){return g(n,e.terminal.parse_arguments)},split_command:function(n){return g(n,e.terminal.split_arguments)},extended_command:function(e,n){try{U=!1,e.exec(n,!0).then((function(){U=!0}))}catch(e){}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var R={};function F(n){return Math.floor(n.height()/(t=e('<div class="terminal temp"><div class="cmd"><span class="cursor">&nbsp;</span></div></div>').appendTo("body"),r=t.find("span"),i={width:r.width(),height:r.outerHeight()},t.remove(),i).height);var t,r,i}function $(){if(window.getSelection||document.getSelection){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}if(document.selection)return document.selection.createRange().text}function j(n){return"scroll"==n.css("overflow")||"scroll"==n.css("overflow-y")||(n.is("body")?e("body").height()>e(window).height():n.get(0).scrollHeight>n.innerHeight())}e.jrpc=function(n,t,r,i,o){R[n]=R[n]||0;var a=e.json_stringify({jsonrpc:"2.0",method:t,params:r,id:++R[n]});return e.ajax({url:n,data:a,success:function(n,t,r){var a;if(!r.getResponseHeader("Content-Type").match(/application\/json/)){var s="Response Content-Type is not application/json";if(!console||!console.warn)throw new Error("WARN: "+s);console.warn(s)}try{a=e.parseJSON(n)}catch(e){if(!o)throw new Error("Invalid JSON");return void o(r,"Invalid JSON",e)}i(a,t,r)},error:o,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var I=!e.terminal.version.match(/^\{\{/),O="Copyright (c) 2011-2016 Jakub Jankiewicz <http://jcubic.pl>",P=I?" v. "+e.terminal.version:" ",L=new RegExp(" {"+P.length+"}$"),z="jQuery Terminal Emulator"+(I?P:""),D=[["jQuery Terminal","(c) 2011-2016 jcubic"],[z,O.replace(/^Copyright | *<.*>/g,"")],[z,O.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(L," ")+P,O],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(L,"")+P,O]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,maskChar:"*",checkArity:!0,raw:!1,exceptionHandler:null,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,processRPCResponse:null,Token:!0,convertLinks:!0,historyState:!1,login:null,outputLimit:-1,formatters:[],onAjaxError:null,onRPCError:null,completion:!1,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop,strings:{wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with ignoreSystemDescribe",oneInterpreterFunction:"You can't use more than one function (rpcwith ignoreSystemDescribe counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:'Sorry, but terminal said that "%s" is not valid selector!',invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveCall:"Recursive call detected, skip"}};var q,K=[],B=window.terminals=new function(n){var t=n?[n]:[],r=0;e.extend(this,{get:function(){return t},rotate:function(){return 1===t.length?t[0]:(r===t.length-1?r=0:++r,t[r]?t[r]:void this.rotate())},length:function(){return t.length},remove:function(e){delete t[e]},set:function(e){for(var n=t.length;n--;)if(t[n]===e)return void(r=n);this.append(e)},front:function(){if(t.length){for(var e=r;!t[e];)e++;return t[e]}},append:function(e){t.push(e)}})},M=[],U=!1,H=!0,W=!0;e.fn.terminal=function(t,i){function o(n){return e.isFunction(pe.processArguments)?g(n,pe.processArguments):pe.processArguments?e.terminal.parse_command(n):e.terminal.split_command(n)}function a(n){"string"==typeof n?Z.echo(n):n instanceof Array?Z.echo(e.map(n,(function(n){return e.json_stringify(n)})).join(" ")):"object"==typeof n?Z.echo(e.json_stringify(n)):Z.echo(n)}function s(n){e.isFunction(pe.onRPCError)?pe.onRPCError.call(Z,n):Z.error("&#91;RPC&#93; "+n.message)}function c(n,t){var r=function(t,r){Z.pause(),e.jrpc(n,t,r,(function(n){n.error?s(n.error):e.isFunction(pe.processRPCResponse)?pe.processRPCResponse.call(Z,n.result,Z):a(n.result),Z.resume()}),f)};return function(e,n){if(""!==e){try{e=o(e)}catch(e){return void n.error(e.toString())}if(t&&"help"!==e.name){var i=n.token();i?r(e.name,[i].concat(e.args)):n.error("&#91;AUTH&#93; "+he.noTokenError)}else r(e.name,e.args)}}}function u(t,r,i,a){return function(s,l){if(""!==s){var c;try{c=o(s)}catch(e){return void Z.error(e.toString())}var f=t[c.name],p=e.type(f);if("function"===p){if(!r||f.length===c.args.length)return f.apply(Z,c.args);Z.error("&#91;Arity&#93; "+sprintf(he.wrongArity,c.name,f.length,c.args.length))}else if("object"===p||"string"===p){var h=[];"object"===p&&(h=Object.keys(f),f=u(f,r,i)),l.push(f,{prompt:c.name+"> ",name:c.name,completion:"object"===p?h:n})}else e.isFunction(a)?a(s,Z):e.isFunction(pe.onCommandNotFound)?pe.onCommandNotFound(s,Z):l.error(sprintf(he.commandNotFound,c.name))}}}function f(n,t,r){Z.resume(),e.isFunction(pe.onAjaxError)?pe.onAjaxError.call(Z,n,t,r):"abort"!==t&&Z.error("&#91;AJAX&#93; "+t+" - "+he.serverResponse+": \n"+e.terminal.escape_brackets(n.responseText))}function p(n,t,r){e.jrpc(n,"system.describe",[],(function(i){if(i.procs){var o={};e.each(i.procs,(function(r,i){o[i.name]=function(){var r=t&&"help"!=i.name,o=Array.prototype.slice.call(arguments),l=o.length+(r?1:0);if(pe.checkArity&&i.params&&i.params.length!==l)Z.error("&#91;Arity&#93; "+sprintf(he.wrongArity,i.name,i.params.length,l));else{if(Z.pause(),r){var c=Z.token(!0);c?o=[c].concat(o):Z.error("&#91;AUTH&#93; "+he.noTokenError)}e.jrpc(n,i.name,o,(function(e){e.error?s(e.error):a(e.result),Z.resume()}),f)}}})),r(o)}else r(null)}),(function(){r(null)}))}function h(n,t,r){r=r||e.noop;var i,o=e.type(n),a={},s=0;if("array"===o){var l={};!function n(r,o){if(r.length){var a=r[0],u=r.slice(1),f=e.type(a);"string"===f?(s++,Z.pause(),pe.ignoreSystemDescribe?(1===s?i=c(a,t):Z.error(he.oneRPCWithIgnore),n(u,o)):p(a,t,(function(t){t&&e.extend(l,t),Z.resume(),n(u,o)}))):"function"===f?(i?Z.error(he.oneInterpreterFunction):i=a,n(u,o)):"object"===f&&(e.extend(l,a),n(u,o))}else o()}(n,(function(){r({interpreter:u(l,!1,t,i),completion:Object.keys(l)})}))}else if("string"===o)pe.ignoreSystemDescribe?r({interpreter:c(n,t),completion:pe.completion}):(Z.pause(),p(n,t,(function(e){e?(a.interpreter=u(e,!1,t),a.completion=Object.keys(e)):(a.interpreter=c(n,t),a.completion=pe.completion),r(a),Z.resume()})));else if("object"===o)r({interpreter:u(n,pe.checkArity),completion:Object.keys(n)});else{if("undefined"===o)n=e.noop;else if("function"!==o)throw o+" is invalid interpreter value";r({interpreter:n,completion:pe.completion})}}function d(n,t){var r="boolean"===e.type(t)?"login":t;return function(t,i,o,a){Z.pause(),e.jrpc(n,r,[t,i],(function(e){!e.error&&e.result?o(e.result):o(null),Z.resume()}),f)}}function v(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function y(n,t){e.isFunction(pe.exceptionHandler)?pe.exceptionHandler.call(Z,n):Z.exception(n,t)}function w(){var e;e=Y.prop?Y.prop("scrollHeight"):Y.attr("scrollHeight"),Y.scrollTop(e)}var _=[];function b(n,t){pe.convertLinks&&(n=n.replace(S,"[[!;;]$1]").replace(k,"[[!;;]$1]"));var r,i,o=e.terminal.defaults.formatters;if(!t.raw){for(r=0;r<o.length;++r)try{if("function"==typeof o[r]){var a=o[r](n);"string"==typeof a&&(n=a)}}catch(e){alert("formatting error at formatters["+r+"]\n"+(e.stack?e.stack:e))}n=e.terminal.encode(n)}if(_.push(1),!t.raw&&(n.length>ee||n.match(/\n/))){var s=t.keepWords,l=e.terminal.split_equal(n,ee,s);for(r=0,i=l.length;r<i;++r)""===l[r]||"\r"===l[r]?_.push("<span></span>"):t.raw?_.push(l[r]):_.push(e.terminal.format(l[r],{linksNoReferrer:pe.linksNoReferrer}))}else t.raw||(n=e.terminal.format(n,{linksNoReferrer:pe.linksNoReferrer})),_.push(n);_.push(t.finalize)}function C(n,t){try{var r=e.extend({exec:!0,raw:!1,finalize:e.noop},t||{}),i="function"===e.type(n)?n():n;""!==(i="string"===e.type(i)?i:String(i))&&(r.exec?""!==(i=e.map(i.split(N),(function(n){return n.match(N)&&!e.terminal.is_formatting(n)?(n=n.replace(/^\[\[|\]\]$/g,""),Q&&Q.command==n?Z.error(he.recursiveCall):e.terminal.extended_command(Z,n),""):n})).join(""))&&b(i,r):b(i,r))}catch(e){_=[],alert("[Internal Exception(process_line)]:"+v(e)+"\n"+e.stack)}}function T(){be.resize(ee);var n,t=X.empty().detach();if(pe.outputLimit>=0){var r=0===pe.outputLimit?Z.rows():pe.outputLimit;n=ae.slice(ae.length-r-1)}else n=ae;try{_=[],e.each(n,(function(e,n){C.apply(null,n)})),be.before(t),Z.flush()}catch(e){alert("Exception in redraw\n"+e.stack)}}function E(){if(pe.greetings===n)Z.echo(Z.signature);else if(pe.greetings){var e=typeof pe.greetings;"string"===e?Z.echo(pe.greetings):"function"===e?pe.greetings.call(Z,Z.echo):Z.error(he.wrongGreetings)}}function A(n){var t=be.prompt(),r=be.mask();switch(typeof r){case"string":n=n.replace(/./g,r);break;case"boolean":n=r?n.replace(/./g,pe.maskChar):e.terminal.escape_formatting(n)}var i={finalize:function(e){e.addClass("command")}};e.isFunction(t)?t((function(e){Z.echo(e+n,i)})):Z.echo(t+n,i)}var R=!0,I=[];function O(t,r,i){function o(){i||(U=!0,pe.historyState&&Z.save_state(t,!1),U=c),l.resolve(),e.isFunction(pe.onAfterCommand)&&pe.onAfterCommand(Z,t)}t,R&&(R=!1,(pe.historyState||pe.execHash&&i)&&(M.length?Z.save_state(null):Z.save_state()));try{if(e.isFunction(pe.onBeforeCommand)&&!1===pe.onBeforeCommand(Z,t))return;i||(Q=e.terminal.split_command(t)),V()||(i&&e.isFunction(pe.historyFilter)&&pe.historyFilter(t)||t.match(pe.historyFilter))&&be.history().append(t);var s=_e.top();r||A(t);var l=new e.Deferred,c=U;if(t.match(/^\s*login\s*$/)&&Z.token(!0))Z.level()>1?Z.logout(!0):Z.logout(),o();else if(pe.exit&&t.match(/^\s*exit\s*$/)&&!ce){var u=Z.level();(1==u&&Z.get_token()||u>1)&&(Z.get_token(!0)&&Z.set_token(n,!0),Z.pop()),o()}else if(pe.clear&&t.match(/^\s*clear\s*$/)&&!ce)Z.clear(),o();else{var f=ae.length-1,p=s.interpreter.call(Z,t,Z);if(p!==n)return Z.pause(),e.when(p).then((function(e){e&&f===ae.length-1&&a(e),o(),Z.resume()}));if(ge){I.push((function(){o()}))}else o()}return l.promise()}catch(e){throw y(e,"USER"),Z.resume(),e}}function P(){var n=Z.prefix_name(!0)+"_";e.Storage.remove(n+"token"),e.Storage.remove(n+"login")}function L(n){var t,r,i,o=_e.top(),a=Z.prefix_name(!0);V()||(t=a,r=Z.prefix_name()+"_interpreters",i=(i=e.Storage.get(r))?e.parseJSON(i):[],-1==e.inArray(t,i)&&(i.push(t),e.Storage.set(r,e.json_stringify(i)))),be.name(a),e.isFunction(o.prompt)?be.prompt((function(e){o.prompt(e,Z)})):be.prompt(o.prompt),be.set(""),!n&&e.isFunction(o.onStart)&&o.onStart(Z)}function z(){L(),E();var n=!1;if(e.isFunction(pe.onInit)){ue=function(){n=!0};try{pe.onInit(Z)}catch(e){y(e,"OnInit")}finally{ue=e.noop,n||Z.resume()}}function t(){if(H&&pe.execHash)try{if(location.hash){var n=location.hash.replace(/^#/,"");q=e.parseJSON(decodeURIComponent(n))}else q=[];q.length?function(e){var n=B.get()[e[0]];if(!n)throw new Error(he.invalidTerminalId);var t=e[1];if(M[t])n.import_view(M[t]);else{U=!1;var r=e[2];r&&n.exec(r).then((function(){U=!0,M[t]=n.export_view()}))}}(q[q.length-1]):M[0]&&Z.import_view(M[0])}catch(e){y(e,"TERMINAL")}}W&&(W=!1,e.fn.hashchange?e(window).hashchange(t):e(window).bind("hashchange",t))}function J(n,t,r){if(pe.clear&&-1==e.inArray("clear",r)&&r.push("clear"),pe.exit&&-1==e.inArray("exit",r)&&r.push("exit"),be.get().substring(0,be.position())===n){for(var i=new RegExp("^"+e.terminal.escape_regex(t)),o=[],a=r.length;a--;)i.test(r[a])&&o.push(r[a]);if(1===o.length)Z.insert(o[0].replace(i,""));else if(o.length>1)if(oe>=2){A(n);var s=o.reverse().join("\t");Z.echo(e.terminal.escape_brackets(s),{keepWords:!0}),oe=0}else{var l,c=!1;e:for(l=t.length;l<o[0].length;++l){for(a=1;a<o.length;++a)if(o[0].charAt(l)!==o[a].charAt(l))break e;c=!0}c&&Z.insert(o[0].slice(0,l).replace(i,""))}}}function V(){return ce||!1!==be.mask()}function G(t){var r,i,o=_e.top();if(!Z.paused()&&Z.enabled()){if(e.isFunction(o.keydown)){if((r=o.keydown(t,Z))!==n)return r}else if(e.isFunction(pe.keydown)&&(r=pe.keydown(t,Z))!==n)return r;var a;if(a=pe.completion&&"boolean"!=e.type(pe.completion)&&o.completion===n?pe.completion:o.completion,Z.oneTime(10,(function(){ve()})),9!==t.which&&(oe=0),68===t.which&&t.ctrlKey)return ce||(""===be.get()?_e.size()>1||pe.login!==n?Z.pop(""):(Z.resume(),Z.echo("")):Z.set_command("")),!1;if(76===t.which&&t.ctrlKey)Z.clear();else{if(a&&9===t.which){++oe;var s,l=be.position(),c=be.get().substring(0,l),u=c.split(" ");if(1==u.length)s=u[0];else for(s=u[u.length-1],i=u.length-1;i>0&&"\\"==u[i-1][u[i-1].length-1];i--)s=u[i-1]+" "+s;switch(e.type(a)){case"function":a(Z,s,(function(e){J(c,s,e)}));break;case"array":J(c,s,a);break;default:throw new Error(u.invalidCompletion)}return!1}if(86===t.which&&t.ctrlKey)return void Z.oneTime(1,(function(){w()}));if(9===t.which&&t.ctrlKey){if(B.length()>1)return Z.focus(!1),!1}else 34===t.which?Z.scroll(Z.height()):33===t.which?Z.scroll(-Z.height()):Z.attr({scrollTop:Z.attr("scrollHeight")})}}else if(68===t.which&&t.ctrlKey){if(K.length){for(i=K.length;i--;){var f=K[i];if(4!==f.readyState)try{f.abort()}catch(e){Z.error(u.ajaxAbortError)}}K=[],Z.resume()}return!1}}var Y,Q,Z=this;if(this.length>1)return this.each((function(){e.fn.terminal.call(e(this),t,e.extend({name:Z.selector},i))}));if(Z.data("terminal"))return Z.data("terminal");if(0===Z.length)throw sprintf(e.terminal.defaults.strings.invalidSelector,Z.selector);var X,ee,ne,te,re,ie,oe=0,ae=[],se=B.length(),le=new l,ce=!1,ue=e.noop,fe=[],pe=e.extend({},e.terminal.defaults,{name:Z.selector},i||{}),he=e.terminal.defaults.strings,me=pe.enabled,ge=!1;e.extend(Z,e.omap({id:function(){return se},clear:function(){X.html(""),ae=[];try{pe.onClear(Z)}catch(e){throw y(e,"onClear"),e}return Z.attr({scrollTop:0}),Z},export_view:function(){return e.extend({},{focus:me,mask:be.mask(),prompt:Z.get_prompt(),command:Z.get_command(),position:be.position(),lines:r(ae),interpreters:_e.clone()},e.isFunction(pe.onExport)?pe.onExport():{})},import_view:function(n){if(ce)throw new Error(sprintf(he.notWhileLogin,"import_view"));return e.isFunction(pe.onImport)&&pe.onImport(n),Z.set_prompt(n.prompt),Z.set_command(n.command),be.position(n.position),be.mask(n.mask),n.focus&&Z.focus(),ae=r(n.lines),_e=n.interpreters,T(),Z},save_state:function(t,r,i){if(void 0!==i?M[i]=Z.export_view():M.push(Z.export_view()),e.isArray(q)||(q=[]),t!==n&&!r){var o=[se,M.length-1,t];q.push(o),U&&(H=!1,location.hash=e.json_stringify(q),setTimeout((function(){H=!0}),100))}},exec:function(n,t,r){if(e.isArray(n))return e.when.apply(e,e.map(n,(function(e){return Z.exec(e,t)})));var i=r||new e.Deferred;return ge?fe.push([n,t,i]):O(n,t,!0).then((function(){i.resolve(Z)})),i.promise()},autologin:function(e,n,t){return Z.trigger("terminal.autologin",[e,n,t]),Z},login:function(n,t,r,i){if(le.push([].slice.call(arguments)),ce)throw new Error(sprintf(he.notWhileLogin,"login"));if(!e.isFunction(n))throw new Error(he.loginIsNotAFunction);if(Z.token(!0)&&Z.login_name(!0))return e.isFunction(r)&&r(),Z;pe.history&&be.history().disable();var o=Z.level();function a(n,a,s,l){if(a){for(;Z.level()>o;)Z.pop();pe.history&&be.history().enable();var c=Z.prefix_name(!0)+"_";e.Storage.set(c+"token",a),e.Storage.set(c+"login",n),ce=!1,e.isFunction(r)&&r()}else t?(s||Z.error(he.wrongPasswordTryAgain),Z.pop().set_mask(!1)):(ce=!1,s||Z.error(he.wrongPassword),Z.pop().pop()),e.isFunction(i)&&i();Z.off("terminal.autologin")}return ce=!0,Z.on("terminal.autologin",(function(e,n,t,r){a(n,t,r)})),Z.push((function(e){Z.set_mask(pe.maskChar).push((function(t){try{n.call(Z,e,t,(function(n,t){a(e,n,t)}))}catch(e){y(e,"AUTH")}}),{prompt:he.password+": ",name:"password"})}),{prompt:he.login+": ",name:"login"}),Z},settings:function(){return pe},commands:function(){return _e.top().interpreter},setInterpreter:function(){window.console&&console.warn&&console.warn("This function is deprecated, use set_interpreter insead!"),Z.set_interpreter.apply(Z,arguments)},set_interpreter:function(n,t){function r(){Z.pause(),h(n,!!t,(function(n){Z.resume();var t=_e.top();e.extend(t,n),L(!0)}))}"string"==e.type(n)&&t?Z.login(d(n,t),!0,r):r()},greetings:function(){return E(),Z},paused:function(){return ge},pause:function(){return ue(),!ge&&be&&(ge=!0,be.disable().hidden(),e.isFunction(pe.onPause)&&pe.onPause()),Z},resume:function(){if(ge&&be){ge=!1,be.enable().visible();var n=fe;fe=[],function t(){if(n.length)Z.exec.apply(Z,n.shift()).then(t);else{Z.trigger("resume");var r=I.shift();r&&r(),w(),e.isFunction(pe.onResume)&&pe.onResume()}}()}return Z},cols:function(){return pe.numChars?pe.numChars:function(n){for(var t=e('<div class="terminal"><span class="cursor"></span></div>').appendTo("body").css("padding",0),r=t.find("span"),i="",o=0;o<=60;++o)i+="&nbsp;";r.html(i);var a=r.width()/60,s=Math.floor(n.width()/a);if(t.remove(),j(n)){var l=n.innerWidth()-n.width();s-=Math.ceil((20-l/2)/(a-1))}return s}(Z)},rows:function(){return pe.numRows?pe.numRows:F(Z)},history:function(){return be.history()},history_state:function(e){return e?Z.oneTime(1,(function(){pe.historyState=!0,M.length?B.length()>1&&Z.save_state(null):Z.save_state()})):pe.historyState=!1,Z},next:function(){if(1===B.length())return Z;var n,t,r,i,o=Z.offset().top;Z.height(),Z.scrollTop();if(n=Z,t=e(window).scrollTop(),r=t+e(window).height(),(i=e(n).offset().top)+e(n).height()>=t&&i<=r){B.front().disable();var a=B.rotate().enable(),s=a.offset().top-50;e("html,body").animate({scrollTop:s},500);try{pe.onTerminalChange(a)}catch(e){throw y(e,"onTerminalChange"),e}return a}return Z.enable(),e("html,body").animate({scrollTop:o-50},500),Z},focus:function(e,n){if(1===B.length())if(!1===e)try{(!n&&!1!==pe.onBlur(Z)||n)&&Z.disable()}catch(e){throw y(e,"onBlur"),e}else try{(!n&&!1!==pe.onFocus(Z)||n)&&Z.enable()}catch(e){throw y(e,"onFocus"),e}else if(!1===e)Z.next();else{var t=B.front();if(t!=Z&&(t.disable(),!n))try{pe.onTerminalChange(Z)}catch(e){throw y(e,"onTerminalChange"),e}B.set(Z),Z.enable()}return Z},freeze:function(e){e?(Z.disable(),ie=!0):(ie=!1,Z.enable())},frozen:function(){return ie},enable:function(){return me||ie||(ee===n&&Z.resize(),be&&(be.enable(),me=!0)),Z},disable:function(){return me&&be&&!ie&&(me=!1,be.disable()),Z},enabled:function(){return me},signature:function(){var e=Z.cols(),n=e<15?null:e<35?0:e<55?1:e<64?2:e<75?3:4;return null!==n?D[n].join("\n")+"\n":""},version:function(){return e.terminal.version},cmd:function(){return be},get_command:function(){return be.get()},set_command:function(e){return be.set(e),Z},insert:function(e){if("string"==typeof e)return be.insert(e),Z;throw"insert function argument is not a string"},set_prompt:function(n){return function(n,t){try{if(e.isFunction(t))t((function(){}));else if("string"!=typeof t)throw n+" must be string or function"}catch(e){return y(e,n.toUpperCase()),!1}return!0}("prompt",n)&&(e.isFunction(n)?be.prompt((function(e){n(e,Z)})):be.prompt(n),_e.top().prompt=n),Z},get_prompt:function(){return _e.top().prompt},set_mask:function(e){return be.mask(!0===e?pe.maskChar:e),Z},get_output:function(n){return n?ae:e.map(ae,(function(n){return e.isFunction(n[0])?n[0]():n[0]})).join("\n")},resize:function(n,t){if(Z.is(":visible")){n&&t&&(Z.width(n),Z.height(t)),n=Z.width(),t=Z.height();var r=Z.cols(),i=Z.rows();if(r!==ee||i!==ne){ee=r,ne=i,T();var o=_e.top();e.isFunction(o.resize)?o.resize(Z):e.isFunction(pe.onResize)&&pe.onResize(Z),re=t,te=n,w()}}else Z.stopTime("resize"),Z.oneTime(500,"resize",(function(){Z.resize(n,t)}));return Z},flush:function(){try{var n;if(e.each(_,(function(t,r){if(1===r)n=e("<div></div>");else if(e.isFunction(r)){n.appendTo(X);try{r(n)}catch(e){y(e,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(n).width("100%")})),pe.outputLimit>=0){var t=0===pe.outputLimit?Z.rows():pe.outputLimit,r=X.find("div div");if(r.length>t){var i=ae.length-t+1,o=r.slice(0,i),a=o.parent();o.remove(),a.each((function(){var n=e(this);n.is(":empty")&&n.remove()}))}}w(),_=[]}catch(e){alert("[Flush] "+v(e)+"\n"+e.stack)}return Z},update:function(e,n){return e<0&&(e=ae.length+e),ae[e]?(ae[e][0]=n,T()):Z.error("Invalid line number "+e),Z},echo:function(n,t){return n=n||"",e.when(n).then((function(n){try{_=[];var r=e.extend({flush:!0,raw:pe.raw,finalize:e.noop,keepWords:!1},t||{});C(n,r),ae.push([n,e.extend(r,{exec:!1})]),r.flush&&Z.flush(),ne=F(Z),ve()}catch(e){alert("[Terminal.echo] "+v(e)+"\n"+e.stack)}})),Z},error:function(n,t){var r=e.terminal.escape_brackets(n).replace(/\\$/,"&#92;").replace(x,"]$1[[;;;error]");return Z.echo("[[;;;error]"+r+"]",t)},exception:function(n,t){var r=v(n);t&&(r="&#91;"+t+"&#93;: "+r),r&&Z.error(r,{finalize:function(e){e.addClass("exception message")}}),"string"==typeof n.fileName&&(Z.pause(),e.get(n.fileName,(function(e){Z.resume();var t=n.lineNumber-1,r=e.split("\n")[t];r&&Z.error("["+n.lineNumber+"]: "+r)}))),n.stack&&Z.echo(n.stack.split(/\n/g).map((function(e){return"[[;;;error]"+e.replace(x,(function(e){return"]"+e+"[[;;;error]"}))+"]"})).join("\n"),{finalize:function(e){e.addClass("exception stack-trace")}})},scroll:function(e){var n;return e=Math.round(e),Y.prop?(e>Y.prop("scrollTop")&&e>0&&Y.prop("scrollTop",0),n=Y.prop("scrollTop"),Y.scrollTop(n+e)):(e>Y.attr("scrollTop")&&e>0&&Y.attr("scrollTop",0),n=Y.attr("scrollTop"),Y.scrollTop(n+e)),Z},logout:function(e){if(ce)throw new Error(sprintf(he.notWhileLogin,"import_view"));if(e){var t=le.pop();Z.set_token(n,!0),Z.login.apply(Z,t)}else for(;_e.size()>0&&!Z.pop(););return Z},token:function(n){return e.Storage.get(Z.prefix_name(n)+"_token")},set_token:function(n,t){var r=Z.prefix_name(t)+"_token";return void 0===n?e.Storage.remove(r,n):e.Storage.set(r,n),Z},get_token:function(n){return e.Storage.get(Z.prefix_name(n)+"_token")},login_name:function(n){return e.Storage.get(Z.prefix_name(n)+"_login")},name:function(){return _e.top().name},prefix_name:function(e){var n=(pe.name?pe.name+"_":"")+se;if(e&&_e.size()>1){var t=_e.map((function(e){return e.name})).slice(1).join("_");t&&(n+="_"+t)}return n},read:function(n,t){var r=new e.Deferred;return Z.push((function(n){Z.pop(),e.isFunction(t)&&t(n),r.resolve(n)}),{prompt:n}),r.promise()},push:function(t,r){!(r=r||{}).name&&Q&&(r.name=Q.name),r.prompt===n&&(r.prompt=r.name+" ");var i=_e.top();i&&(i.mask=be.mask());var o=ge;return Z.pause(),h(t,!!r.login,(function(n){if(_e.push(e.extend({},n,r)),r.login){var i=e.type(r.login);"function"==i?Z.login(r.login,!1,L,Z.pop):("string"==e.type(t)&&"string"==i||"boolean"==i)&&Z.login(d(t,r.login),!1,L,Z.pop)}else L();o||Z.resume()})),Z},pop:function(t){t!==n&&A(t);Z.token(!0);if(1==_e.size()){if(pe.login){if(function(){if(e.isFunction(pe.onBeforeLogout))try{if(!1===pe.onBeforeLogout(Z))return}catch(e){throw y(e,"onBeforeLogout"),e}if(P(),e.isFunction(pe.onAfterLogout))try{pe.onAfterLogout(Z)}catch(e){throw y(e,"onAfterlogout"),e}Z.login(pe.login,!0,z)}(),e.isFunction(pe.onExit))try{pe.onExit(Z)}catch(e){throw y(e,"onExit"),e}return!0}Z.error(he.canExitError)}else{Z.token(!0)&&P();var r=_e.pop();if(L(),e.isFunction(r.onExit))try{r.onExit(Z)}catch(e){throw y(e,"onExit"),e}Z.set_mask(_e.top().mask)}return Z},option:function(n,t){if(void 0===t){if("string"==typeof n)return pe[n];"object"==typeof n&&e.each(n,(function(e,n){pe[e]=n}))}else pe[n]=t;return Z},level:function(){return _e.size()},reset:function(){for(Z.clear();_e.size()>1;)_e.pop();return z(),Z},purge:function(){var n=Z.prefix_name()+"_",t=e.Storage.get(n+"interpreters");return e.each(e.parseJSON(t),(function(n,t){e.Storage.remove(t+"_commands"),e.Storage.remove(t+"_token"),e.Storage.remove(t+"_login")})),be.purge(),e.Storage.remove(n+"interpreters"),Z},destroy:function(){return be.destroy().remove(),X.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),Z.unbind("click mousewheel"),Z.removeData("terminal").removeClass("terminal"),pe.width&&Z.css("width",""),pe.height&&Z.css("height",""),e(window).off("blur",Se).off("focus",ke),B.remove(se),Z}},(function(e,n){return function(){try{return n.apply(Z,[].slice.apply(arguments))}catch(n){throw"exec"!==e&&"resume"!==e&&y(n,"TERMINAL"),n}}})));var de,ve=(de=j(Z),function(){de!==j(Z)&&(Z.resize(),de=j(Z))});pe.width&&Z.width(pe.width),pe.height&&Z.height(pe.height);var ye=navigator.userAgent.toLowerCase();if(Y=ye.match(/(webkit)[ \/]([\w.]+)/)||"body"!=Z[0].tagName.toLowerCase()?Z:e("html"),e(document).bind("ajaxSend.terminal",(function(e,n,t){K.push(n)})),X=e("<div>").addClass("terminal-output").appendTo(Z),Z.addClass("terminal"),pe.login&&e.isFunction(pe.onBeforeLogin))try{pe.onBeforeLogin(Z)}catch(e){throw y(e,"onBeforeLogin"),e}var we,_e,be,xe;pe.login;function ke(){xe&&Z.focus()}function Se(){xe=me,Z.disable()}return"string"==typeof t?we=t:t instanceof Array&&"string"==typeof t[0]&&(we=t[0]),we&&("string"==typeof pe.login||pe.login)&&(pe.login=d(we,pe.login)),B.append(Z),h(t,!!pe.login,(function(t){if(pe.completion&&"boolean"!=typeof pe.completion&&(t.completion=pe.completion),_e=new l(e.extend({name:pe.name,prompt:pe.prompt,keypress:pe.keypress,keydown:pe.keydown,resize:pe.onResize,greetings:pe.greetings,mousewheel:pe.mousewheel},t)),be=e("<div/>").appendTo(Z).cmd({prompt:pe.prompt,history:pe.history,historyFilter:pe.historyFilter,historySize:pe.historySize,width:"100%",enabled:me&&!m,keydown:G,keypress:function(n){var t=_e.top();return e.isFunction(t.keypress)?t.keypress(n,Z):e.isFunction(pe.keypress)?pe.keypress(n,Z):void 0},onCommandChange:function(n){if(e.isFunction(pe.onCommandChange))try{pe.onCommandChange(n,Z)}catch(e){throw y(e,"onCommandChange"),e}w()},commands:O}),me&&Z.is(":visible")&&!m?Z.focus(n,!0):Z.disable(),Z.oneTime(100,(function(){function n(n){!e(n.target).closest(".terminal").length&&Z.enabled()&&!1!==pe.onBlur(Z)&&Z.disable()}e(document).bind("click.terminal",n).bind("contextmenu.terminal",n)})),!m)var r=e(window).on("focus",ke).on("blur",Se);if(Z.click((function(e){Z.enabled()?m&&Z.focus(!0,!0):Z.focus(),be.enable()})).delegate(".exception a","click",(function(n){var t,r=e(this).attr("href");r.match(/:[0-9]+$/)&&(n.preventDefault(),(t=r.match(/(.*):([0-9]+):([0-9]+)$/))&&(Z.pause(),e.get(t[1],(function(n){var r=location.href.replace(/[^\/]+$/,""),i=t[1].replace(r,"");Z.echo("[[b;white;]"+i+"]");var o=n.split("\n"),a=+t[2]-1;Z.echo(o.slice(a-2,a+3).map((function(n,t){return 2==t&&(n="[[;#f00;]"+e.terminal.escape_brackets(n)+"]"),"["+(a+t)+"]: "+n})).join("\n")).resume()}),"text")))})),navigator.platform.match(/linux/i)||Z.mousedown((function(e){if(2==e.which){var n=$();Z.insert(n)}})),Z.is(":visible")&&(ee=Z.cols(),be.resize(ee),ne=F(Z)),pe.login?Z.login(pe.login,!0,z):z(),Z.oneTime(100,(function(){r.bind("resize.terminal",(function(){if(Z.is(":visible")){var e=Z.width(),n=Z.height();re===n&&te===e||Z.resize()}}))})),pe.execHash)if(location.hash)try{var i=location.hash.replace(/^#/,"");q=e.parseJSON(decodeURIComponent(i));var o=0;!function n(){var t=q[o++];t?function(n){var t=B.get()[n[0]];if(t&&se==t.id()&&n[2])try{if(ge){var r=e.Deferred();return I.push((function(){return t.exec(n[2]).then((function(e,i){t.save_state(n[2],!0,n[1]),r.resolve()}))})),r.promise()}return t.exec(n[2]).then((function(e,r){t.save_state(n[2],!0,n[1])}))}catch(n){var i="Error while exec with command "+e.terminal.escape_brackets(command);t.error(i).exception(n)}}(t).then(n):U=!0}()}catch(e){}else U=!0;else U=!0;if(e.event.special.mousewheel){var a=!1;e(document).bind("keydown.terminal",(function(e){e.shiftKey&&(a=!0)})).bind("keyup.terminal",(function(e){(e.shiftKey||16==e.which)&&(a=!1)})),Z.mousewheel((function(n,t){if(!a){var r=_e.top();if(e.isFunction(r.mousewheel)){if(!1===r.mousewheel(n,t,Z))return}else e.isFunction(pe.mousewheel)&&pe.mousewheel(n,t,Z);t>0?Z.scroll(-40):Z.scroll(40)}}))}})),Z.data("terminal",Z),Z}}(jQuery);